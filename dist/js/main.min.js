function isImageSupported(e){const n=new Image;return n.src=e,new Promise((e=>{n.onload=function(){e(!0)},n.onerror=function(){e(!1)}}))}async function replaceImagesBasedOnSupport(){const e=document.querySelectorAll('img[src$=".jpg"], img[src$=".png"]');for(const n of e){const e=n.src;await isImageSupported(e.replace(/\.jpg$|\.png$/,".avif"))?n.src=e.replace(/\.jpg$|\.png$/,".avif"):await isImageSupported(e.replace(/\.jpg$|\.png$/,".webp"))&&(n.src=e.replace(/\.jpg$|\.png$/,".webp"))}}window.addEventListener("load",replaceImagesBasedOnSupport);